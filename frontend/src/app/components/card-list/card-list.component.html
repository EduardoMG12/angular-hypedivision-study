<div class="bg-wood-smoke border border-portage/20 p-6 rounded-lg shadow-lg">
  <h2 class="text-xl text-white font-semibold mb-4">Cards Organizados por Tópicos</h2>
  <p class="text-santas-gray text-sm mb-6">
    Explore e selecione cartões pelos tópicos ou use a pesquisa para encontrar informações específicas
  </p>

  <div class="relative mb-6">
    <input type="text" placeholder="Pesquisar flashcards..."
      class="w-full p-3 bg-[#2E2E3A] text-white rounded-md focus:outline-none focus:ring-2 focus:ring-portage pl-10" />
    <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-santas-gray" fill="none" stroke="currentColor"
      viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
    </svg>
  </div>

  <div class="mb-4 text-right">
    <button (click)="toggleAllTopics.emit()" class="text-sm text-portage hover:text-portage">
      {{ allExpanded ? "Fechar Todos" : "Abrir Todos" }}
    </button>
  </div>

  <div class="space-y-2">
    <!-- Cards Without Tags Section -->
    <div *ngIf="cardsWithoutTags && cardsWithoutTags.length > 0" class="mb-4">
      <div class="flex items-center justify-between py-2 cursor-pointer hover:bg-portage/20 rounded-md px-2"
        (click)="toggleCardsWithoutTags()">
        <div class="flex items-center gap-2">
          <span class="text-portage text-lg transition-transform duration-200 ease-in-out"
            [ngClass]="{'rotate-90': areCardsWithoutTagsExpanded}">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </span>
          <span class="text-white font-semibold text-lg">Cards Sem Tag</span>
        </div>
        <div class="flex items-center rounded-lg bg-portage/50 px-2 h-6 text-alabaster">
          <span>{{ cardsWithoutTags.length }}</span>
        </div>
      </div>
      <div *ngIf="areCardsWithoutTagsExpanded" class="flex flex-col justify-center items-stretch gap-3 mt-1">
        <div *ngFor="let card of cardsWithoutTags"
          class="flex justify-between items-center py-1 text-gray-300 hover:bg-portage/20 border border-alabaster/10 rounded-md cursor-pointer px-2">
          <div class="flex flex-col justify-center items-start">
            <span class="text-lg text-portage">{{ card.title }}</span>
            <span class="text-sm text-gray-400">{{ card.description || "Sem descrição" }}</span>
          </div>
          <div class="flex items-center gap-2"></div>
        </div>
      </div>
    </div>

    <!-- Topics Section -->
    <app-topic-item *ngFor="let topic of topics" [topic]="topic" [level]="0" [expandedTopics]="expandedTopics"
      (toggle)="toggleTopic.emit($event)"></app-topic-item>
  </div>
</div>